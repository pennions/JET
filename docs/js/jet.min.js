!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).jet={})}(this,function(e){"use strict";const o=/\{\{([\s\S]+?)\}\}/gim,b=/\{\{~([\s\S]+?)~\}\}/im,p=/if([\s\S]+?)\s|is|not/im,S=/ ?if([\s\S]+?)[is|not]?([\s\S]+?)(?=<|{)/im,x=/ (is|not) ([\s\S]+?)(\n|<|{)/im,a=/for([\s\S]+?)(of|in)/im,u=/(of|in)([\s\S]+?)(?=<|{)/im,v=/\{\{%([\s\S]+?)%\}\}/im,h=/ ?for([\s\S]+?)(of|in)([\s\S]+?)(?=<|{)/im,n=/\{\{#([\s\S]+?)\}\}/gim,y=/\{\{(.+)\}\}/gm;function m(e,t){var r;let i="";for(r of e.split("."))r=r.trim(),i=(i||t)[r];return i}function d(e,t){var r="{{"+e,e=e+"}}",i=t.indexOf(r),r=t.indexOf(r,i+3),n=t.indexOf(e),r=-1!==r&&r<n?t.lastIndexOf(e):n;return t.substring(i,r+3)}function g(e){return e.substring(4,e.length-4)}function f(e,t){if(!v.test(e))return e;var r=d("%",e),i=u.exec(r)[2].trim(),n=m(i,t),o=a.exec(r)[1].trim(),l=g(r).replace(h,"");let s="";for(const c in n)s+=function(e,t,r){let i=e.replace(y,e=>e.replace(t,r));return i=i.replace(p,e=>e.replace(t,r)),i.replace(u,e=>e.replace(t,r))}(l,o,i+"."+c);return f(e.replace(r,s),t)}const r=function(e,t){var r;return r=t,function f(e,t){if(!b.test(e))return e;const r=x.exec(e);let i=!1,a=!1,n="";r&&(s=r[1].substring(0,4).trim(),i="is"===s,a="not"===s,n=r[2].trim().toLowerCase());let o=p.exec(e),l=(o=o[1].trim(),m(o,t));l=l&&l.toString().toLowerCase();var s=d("~",e),c=g(s).replace(S,"");let u="";return i&&(u=l===n?c:""),a&&(u=l!==n?c:""),r||(u=l?c:""),f(e.replace(s,u),t)}(f(e.replace(n,e=>{let t="";e=m(g(e),r);return e&&(t=e),t=t.trim(),t}),t),t)},i=function(e,n){return e.replace(o,(e,t)=>{let r="";var i="!"===(t=t.trim())[0],t=m(t=i?t.substring(1).trim():t,n);return t&&(r=t),r=r.trim(),i?r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):r})};function t(e,t){return e=r(e,t),i(e,t)}globalThis?globalThis.jet={build:r,render:i,compile:t}:module.exports={build:r,render:i,compile:t},e.build=r,e.compile=t,e.render=i,Object.defineProperty(e,"__esModule",{value:!0})});